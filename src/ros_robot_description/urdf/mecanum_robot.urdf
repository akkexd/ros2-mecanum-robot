<?xml version="1.0" encoding="utf-8"?>
<robot name="mecanum_robot">

  <!-- Colors -->
  <material name="green"><color rgba="0 0.7 0 1"/></material>
  <material name="black"><color rgba="0.1 0.1 0.1 1"/></material>
  <material name="dark_gray"><color rgba="0.3 0.3 0.3 1"/></material>
  <material name="silver"><color rgba="0.8 0.8 0.8 1"/></material>

  <!-- Base Footprint (ground level) -->
  <link name="base_footprint"/>

  <!-- Base Link (robot body) -->
  <link name="base_link">
    <visual>
      <geometry><box size="0.300 0.245 0.050"/></geometry>
      <material name="green"/>
    </visual>
    <collision>
      <geometry><box size="0.300 0.245 0.050"/></geometry>
    </collision>
    <inertial>
      <mass value="2.02"/>
      <inertia ixx="0.02" ixy="0" ixz="0" iyy="0.03" iyz="0" izz="0.04"/>
    </inertial>
  </link>

  <joint name="base_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin xyz="0 0 0.0815" rpy="0 0 0"/>
  </joint>

  <!-- IMU -->
  <link name="imu_link">
    <visual>
      <geometry><box size="0.02 0.02 0.005"/></geometry>
      <material name="dark_gray"/>
    </visual>
  </link>

  <joint name="imu_joint" type="fixed">
    <parent link="base_link"/>
    <child link="imu_link"/>
    <origin xyz="-0.06 0.01 0.01" rpy="0 3.1415926 1.5707963"/>
  </joint>

  <!-- Front Left Wheel -->
  <link name="front_left_wheel">
    <visual>
      <geometry><cylinder length="0.050" radius="0.040"/></geometry>
      <material name="black"/>
    </visual>
    <collision>
      <geometry><cylinder length="0.050" radius="0.040"/></geometry>
    </collision>
    <inertial>
      <mass value="0.15"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0002"/>
    </inertial>
  </link>

  <joint name="front_left_joint" type="continuous">
    <parent link="base_link"/>
    <child link="front_left_wheel"/>
    <origin xyz="0.08 0.0845 -0.0389" rpy="1.5707963 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>

  <!-- Front Right Wheel -->
  <link name="front_right_wheel">
    <visual>
      <geometry><cylinder length="0.050" radius="0.040"/></geometry>
      <material name="black"/>
    </visual>
    <collision>
      <geometry><cylinder length="0.050" radius="0.040"/></geometry>
    </collision>
    <inertial>
      <mass value="0.15"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0002"/>
    </inertial>
  </link>

  <joint name="front_right_joint" type="continuous">
    <parent link="base_link"/>
    <child link="front_right_wheel"/>
    <origin xyz="0.08 -0.0845 -0.0389" rpy="-1.5707963 0 3.1415926"/>
    <axis xyz="0 0 1"/>
  </joint>

  <!-- Back Left Wheel -->
  <link name="back_left_wheel">
    <visual>
      <geometry><cylinder length="0.050" radius="0.040"/></geometry>
      <material name="black"/>
    </visual>
    <collision>
      <geometry><cylinder length="0.050" radius="0.040"/></geometry>
    </collision>
    <inertial>
      <mass value="0.15"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0002"/>
    </inertial>
  </link>

  <joint name="back_left_joint" type="continuous">
    <parent link="base_link"/>
    <child link="back_left_wheel"/>
    <origin xyz="-0.08 0.0845 -0.0395" rpy="1.5707963 0 0"/>
    <axis xyz="0 0 1"/>
  </joint>

  <!-- Back Right Wheel -->
  <link name="back_right_wheel">
    <visual>
      <geometry><cylinder length="0.050" radius="0.040"/></geometry>
      <material name="black"/>
    </visual>
    <collision>
      <geometry><cylinder length="0.050" radius="0.040"/></geometry>
    </collision>
    <inertial>
      <mass value="0.15"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0002"/>
    </inertial>
  </link>

  <joint name="back_right_joint" type="continuous">
    <parent link="base_link"/>
    <child link="back_right_wheel"/>
    <origin xyz="-0.08 -0.0845 -0.0395" rpy="-1.5707963 0 3.1415926"/>
    <axis xyz="0 0 1"/>
  </joint>

  <!-- RPLIDAR A2M8 -->
  <link name="laser_link">
    <visual>
      <geometry><cylinder length="0.041" radius="0.038"/></geometry>
      <material name="dark_gray"/>
    </visual>
    <collision>
      <geometry><cylinder length="0.041" radius="0.038"/></geometry>
    </collision>
    <inertial>
      <mass value="0.190"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0002"/>
    </inertial>
  </link>

  <joint name="laser_joint" type="fixed">
    <parent link="base_link"/>
    <child link="laser_link"/>
    <!-- ADJUST: x=forward, y=left, z=up from base_link center -->
    <origin xyz="0.04 0 0.11" rpy="0 0 0"/>
  </joint>

  <!-- Intel RealSense D435 -->
  <link name="camera_link">
    <visual>
      <geometry><box size="0.025 0.090 0.025"/></geometry>
      <material name="silver"/>
    </visual>
    <collision>
      <geometry><box size="0.025 0.090 0.025"/></geometry>
    </collision>
    <inertial>
      <mass value="0.072"/>
      <inertia ixx="0.00001" ixy="0" ixz="0" iyy="0.00001" iyz="0" izz="0.00001"/>
    </inertial>
  </link>

  <joint name="camera_joint" type="fixed">
    <parent link="base_link"/>
    <child link="camera_link"/>
    <!-- ADJUST: x=forward, y=left, z=up from base_link center -->
    <origin xyz="0.15 0 0.04" rpy="0 0 0"/>
  </joint>

  <!-- Camera Optical Frames (required for RealSense) -->
  <link name="camera_depth_frame"/>
  <joint name="camera_depth_joint" type="fixed">
    <parent link="camera_link"/>
    <child link="camera_depth_frame"/>
    <origin xyz="0 0 0" rpy="-1.5707963 0 -1.5707963"/>
  </joint>

  <link name="camera_depth_optical_frame"/>
  <joint name="camera_depth_optical_joint" type="fixed">
    <parent link="camera_depth_frame"/>
    <child link="camera_depth_optical_frame"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <link name="camera_color_frame"/>
  <joint name="camera_color_joint" type="fixed">
    <parent link="camera_link"/>
    <child link="camera_color_frame"/>
    <origin xyz="0 0.015 0" rpy="-1.5707963 0 -1.5707963"/>
  </joint>

  <link name="camera_color_optical_frame"/>
  <joint name="camera_color_optical_joint" type="fixed">
    <parent link="camera_color_frame"/>
    <child link="camera_color_optical_frame"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

</robot>